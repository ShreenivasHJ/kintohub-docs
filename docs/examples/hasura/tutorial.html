<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Hasura · KintoHub Docs</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="The [open-source project Hasura](https://hasura.io) makes it incredibly easy to setup a [GraphQL API](https://graphql.org) that has async processing patterns built-in."/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Hasura · KintoHub Docs"/><meta property="og:type" content="website"/><meta property="og:url" content="https://docs.kintohub.com/"/><meta property="og:description" content="The [open-source project Hasura](https://hasura.io) makes it incredibly easy to setup a [GraphQL API](https://graphql.org) that has async processing patterns built-in."/><meta name="twitter:card" content="summary"/><link rel="shortcut icon" href="/img/favicon.png"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script src="/js/scrollSpy.js"></script><link rel="stylesheet" href="/css/prism.css"/><link rel="stylesheet" href="/css/main.css"/><script src="/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/"><img class="logo" src="/img/kintohub-title-text.svg" alt="KintoHub Docs"/></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li></ul></nav></div></header></div></div><div class="navPusher singleRowMobileNav"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>GraphQL</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Introduction<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/introduction/getting-started">Getting Started</a></li><li class="navListItem"><a class="navItem" href="/docs/introduction/kintohub-workflow">The KintoHub Workflow</a></li><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Try an example app</h4><ul><li class="navListItem"><a class="navItem" href="/docs/introduction/try-deploying/nodejs-app">Node.js</a></li><li class="navListItem"><a class="navItem" href="/docs/introduction/try-deploying/python-app">Python</a></li><li class="navListItem"><a class="navItem" href="/docs/introduction/try-deploying/java-app">Java</a></li><li class="navListItem"><a class="navItem" href="/docs/introduction/try-deploying/dotnet-app">.NET</a></li><li class="navListItem"><a class="navItem" href="/docs/introduction/try-deploying/php-app">PHP</a></li><li class="navListItem"><a class="navItem" href="/docs/introduction/try-deploying/ruby-app">Ruby</a></li><li class="navListItem"><a class="navItem" href="/docs/introduction/try-deploying/go-app">Go</a></li><li class="navListItem"><a class="navItem" href="/docs/introduction/try-deploying/elixir-app">Elixir</a></li></ul></div></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">KintoBlocks<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/kintoblocks/introduction">Introduction</a></li><li class="navListItem"><a class="navItem" href="/docs/kintoblocks/websites">Websites</a></li><li class="navListItem"><a class="navItem" href="/docs/kintoblocks/microservices">Microservices</a></li><li class="navListItem"><a class="navItem" href="/docs/kintoblocks/custom-services">Custom Services</a></li><li class="navListItem"><a class="navItem" href="/docs/kintoblocks/jobs">Job</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Projects<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/projects/introduction">Introduction</a></li><li class="navListItem"><a class="navItem" href="/docs/projects/environments">Environments</a></li><li class="navListItem"><a class="navItem" href="/docs/projects/promoting">Promoting</a></li><li class="navListItem"><a class="navItem" href="/docs/projects/rollbacks">Rollbacks</a></li><li class="navListItem"><a class="navItem" href="/docs/projects/shut-down">Shut Down</a></li><li class="navListItem"><a class="navItem" href="/docs/projects/metrics">Metrics</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Features<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Building</h4><ul><li class="navListItem"><a class="navItem" href="/docs/features/building/pulling-source-code">Pulling Source Code</a></li><li class="navListItem"><a class="navItem" href="/docs/features/building/branches-and-tags">Branches &amp; Tags</a></li><li class="navListItem"><a class="navItem" href="/docs/features/building/manage-blocks">Manage KintoBlocks</a></li><li class="navListItem"><a class="navItem" href="/docs/features/building/api-docs">API Docs</a></li><li class="navListItem"><a class="navItem" href="/docs/features/building/build-arguments">Build Arguments</a></li><li class="navListItem"><a class="navItem" href="/docs/features/building/helm-arguments">Helm Arguments</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Deploying</h4><ul><li class="navListItem"><a class="navItem" href="/docs/features/deploying/manage-projects">Manage Projects</a></li><li class="navListItem"><a class="navItem" href="/docs/features/deploying/manage-environments">Manage Environments</a></li><li class="navListItem"><a class="navItem" href="/docs/features/deploying/environment-variables">Environment Variables</a></li><li class="navListItem"><a class="navItem" href="/docs/features/deploying/high-availability">High Availability</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Operating</h4><ul><li class="navListItem"><a class="navItem" href="/docs/features/operating/accessing-endpoints">Accessing API Endpoints</a></li><li class="navListItem"><a class="navItem" href="/docs/features/operating/token-session">API Tokens and Sessions</a></li><li class="navListItem"><a class="navItem" href="/docs/features/operating/logs">Logs</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Workspaces &amp; Teams</h4><ul><li class="navListItem"><a class="navItem" href="/docs/features/workspaces-and-teams/workspace-intro">Introduction</a></li><li class="navListItem"><a class="navItem" href="/docs/features/workspaces-and-teams/manage-workspace">Managing Workspaces</a></li><li class="navListItem"><a class="navItem" href="/docs/features/workspaces-and-teams/sharing-workspaces">Sharing Workspaces</a></li></ul></div></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Plans &amp; Billing<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/plans-and-billing/plans">Plans</a></li><li class="navListItem"><a class="navItem" href="/docs/plans-and-billing/upgrading">Upgrading</a></li><li class="navListItem"><a class="navItem" href="/docs/plans-and-billing/billing">Billing</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Quickstarts<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Microservices</h4><ul><li class="navListItem"><a class="navItem" href="/docs/examples/nodejs/express">Express</a></li><li class="navListItem"><a class="navItem" href="/docs/examples/nodejs/koa">Koa</a></li><li class="navListItem"><a class="navItem" href="/docs/examples/nodejs/fastify">Fastify</a></li><li class="navListItem"><a class="navItem" href="/docs/examples/nodejs/hapi">Hapi</a></li><li class="navListItem"><a class="navItem" href="/docs/examples/go/fasthttp">FastHttp</a></li><li class="navListItem"><a class="navItem" href="/docs/examples/go/gin">Gin</a></li><li class="navListItem"><a class="navItem" href="/docs/examples/go/iris">Iris</a></li><li class="navListItem"><a class="navItem" href="/docs/examples/go/beego">Beego</a></li><li class="navListItem"><a class="navItem" href="/docs/examples/python/flask">Flask</a></li><li class="navListItem"><a class="navItem" href="/docs/examples/python/django">Django</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Websites</h4><ul><li class="navListItem"><a class="navItem" href="/docs/examples/static-website/tutorial">Serve Static Files</a></li><li class="navListItem"><a class="navItem" href="/docs/examples/static-website/static">Static HTML Website</a></li><li class="navListItem"><a class="navItem" href="/docs/examples/ionic/tutorial">Ionic PWA</a></li><li class="navListItem"><a class="navItem" href="/docs/examples/docusaurus/tutorial">Docusaurus</a></li><li class="navListItem"><a class="navItem" href="/docs/examples/static-website/jekyll">Jekyll</a></li><li class="navListItem"><a class="navItem" href="/docs/examples/static-website/angular">Angular</a></li><li class="navListItem"><a class="navItem" href="/docs/examples/static-website/react">React</a></li><li class="navListItem"><a class="navItem" href="/docs/examples/static-website/preact">Preact PWA</a></li><li class="navListItem"><a class="navItem" href="/docs/examples/static-website/vue">Vue</a></li><li class="navListItem"><a class="navItem" href="/docs/examples/static-website/nextjs">NextJs</a></li><li class="navListItem"><a class="navItem" href="/docs/examples/gatsby/tutorial">Gatsby</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Jobs</h4><ul><li class="navListItem"><a class="navItem" href="/docs/examples/jobs/puppeteer">Puppeteer</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">GraphQL</h4><ul><li class="navListItem navListItemActive"><a class="navItem" href="/docs/examples/hasura/tutorial">Hasura</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Full-Stack</h4><ul><li class="navListItem"><a class="navItem" href="/docs/examples/todo-list/tutorial">Todo List</a></li></ul></div></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Notes &amp; Experiments<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/release-notes">Release Notes</a></li><li class="navListItem"><a class="navItem" href="/docs/experimental/session-memory">Session Memory</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="https://github.com/kintohub/kintohub-docs/edit/master/docs/examples/hasura/tutorial.md" target="_blank" rel="noreferrer noopener">Edit</a><h1 class="postHeaderTitle">Hasura</h1></header><article><div><span><p>The <a href="https://hasura.io">open-source project Hasura</a> makes it incredibly easy to setup a <a href="https://graphql.org">GraphQL API</a> that has async processing patterns built-in.</p>
<p>Hasura does this by leveraging <a href="https://www.postgresql.org">PostgreSQL</a> as a backing store. On top of that Hasura adds queuing and a subscription mechanism.</p>
<p>This tutorial shows how you can setup Hasura easily with KintoHub, and do that for multiple environments.</p>
<p>Prefer a video instead? See Hasura in action on KintoHub in this <a href="https://www.youtube.com/watch?v=UTmCPEtxALk">recording of our talk at OSCON</a>.</p>
<iframe width="560" height="315" src="https://www.youtube-nocookie.com/embed/UTmCPEtxALk" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
<h2><a class="anchor" aria-hidden="true" id="prepare-a-postgresql-database"></a><a href="#prepare-a-postgresql-database" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Prepare a PostgreSQL database</h2>
<p>Since Hasura depends on PostgreSQL, we'll first need to prepare a database.</p>
<blockquote>
<p>Already got an existing PostgreSQL database? Skip to the <a href="#setup-hasura">next section</a>.</p>
</blockquote>
<h3><a class="anchor" aria-hidden="true" id="use-the-existing-postgresql-kintoblock"></a><a href="#use-the-existing-postgresql-kintoblock" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Use the existing PostgreSQL KintoBlock</h3>
<p>In KintoHub:</p>
<ol>
<li>Select <strong>KintoBlocks</strong> from the sidebar.</li>
<li>Click on <strong>Catlog</strong> tab in <em>KintoBlock List</em> page.</li>
<li>Select the <strong>Postgres</strong> kintoBlock from the Catalog KintoBlock List.</li>
</ol>
<p>KintoBlock is already built and ready to be deployed in a Project.</p>
<h3><a class="anchor" aria-hidden="true" id="deploy-postgresql"></a><a href="#deploy-postgresql" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Deploy PostgreSQL</h3>
<p>The KintoBlock for a new deployment can be instantly added from the KintoBlock page:</p>
<ol>
<li>Click on the <strong>Add to Project</strong> button and the menu with the projects appears.</li>
<li>Click the <strong>New Project</strong> button.</li>
<li>Enter a name in the <strong>Enter project name</strong> field, e.g. <code>hasura</code> and click on <strong>Create</strong> button.</li>
</ol>
<p>This will bring up the <em><strong>Create New Project</strong></em> page with the <em>Project Name</em> (<code>hasura</code>) and <em>Environment Name</em> (<code>dev</code>) already been filled out. In the KintoBlocks section, it can also be seen that the <strong>Postgres</strong> KintoBlock has been added.</p>
<ol start="4">
<li>Click on the <strong>Create New Project</strong> to proceed.</li>
</ol>
<p>Now, note that in the <strong>Project Manage</strong> page, and the <strong>Status &amp; History</strong> section, the deployment is in progress.</p>
<ol start="5">
<li>Wait until the deployment is successful.</li>
</ol>
<h2><a class="anchor" aria-hidden="true" id="setup-hasura"></a><a href="#setup-hasura" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Setup Hasura</h2>
<p>With an existing PostgreSQL database ready, we can setup the Hasura API endpoint.</p>
<h3><a class="anchor" aria-hidden="true" id="fork-hasura-dockerfile"></a><a href="#fork-hasura-dockerfile" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Fork Hasura Dockerfile</h3>
<p>We are going to use an <em>experimental feature</em> in KintoHub that uses a <em>Dockerfile</em> to determine the contents of the KintoBlock.</p>
<ul>
<li>Browse to the <a href="https://github.com/kintohub/hasura-block"><code>kintohub/hasura-block</code> repository on GitHub</a>.</li>
<li>Use the <strong>Fork</strong> button to add the repo to your own GitHub account.</li>
</ul>
<p>Now there is a forked <em>hasura-block</em> repository under your own GitHub account, KintoHub can refer to it.</p>
<p>The repository contains a <code>LICENSE</code> and <code>Dockerfile</code> file only. The Dockerfile is very simple, it refers to the latest <code>hasura/graphql-engine</code> <a href="https://hub.docker.com/r/hasura/graphql-engine">Docker image from Hasura</a> only:</p>
<pre><code class="hljs"><span class="hljs-keyword">FROM</span> hasura/graphql-engine:latest
</code></pre>
<blockquote>
<p><em>Note:</em> We are working on adding Dockerfile and docker image support to Custom Services. In future you should be able to skip this intermediate step to fork the repository.</p>
</blockquote>
<h3><a class="anchor" aria-hidden="true" id="create-a-hasura-kintoblock"></a><a href="#create-a-hasura-kintoblock" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Create a Hasura KintoBlock</h3>
<p>In KintoHub:</p>
<ol>
<li>Select <strong>KintoBlocks</strong> from the sidebar.</li>
<li>Click on the <strong>Create New KintoBlock</strong> card.</li>
<li>Select the <strong>Website</strong> KintoBlock flavor.</li>
</ol>
<p>The <em>Website</em> flavor is chosen because it will provide an HTTPS endpoint that can be reached via the GraphQL API and Hasura's console.</p>
<p>Once the <strong>Choose Repository</strong> page is displayed, specify the repository details as suggested below:</p>
<ol start="4">
<li>Enter the name of the repository as <code>hasura-block</code> in the <strong>Repository</strong> field.</li>
<li>Click on the <strong>Continue</strong> button.</li>
</ol>
<p>In the <strong>Create Website</strong> page, specify the details of the Website KintoBlock by following these steps:</p>
<ol start="6">
<li>Next, enter the <strong>Name</strong> e.g.<code>Hasura</code>, the <strong>Internal Name</strong> will be automatically filled with <code>hasura</code>.</li>
<li>Select the <code>Helm</code> in <strong>Source Type</strong> drop-down.</li>
<li>Choose the <code>Dynamic Web App</code> in <strong>Choose a Type</strong>.</li>
</ol>
<p>This will bring up the additional section for the <em>Dynamic Web App</em>. Some settings will be irrelevant since the Dockerfile will override these options. However, due to Dockerfiles being an experimental feature, some options are still required to complete, therefore they are set to dummy values:</p>
<ol start="9">
<li>Set the <strong>Language</strong> and <strong>Version</strong> e.g. <code>Node.js</code> and <code>11.7.0-alpine</code>.</li>
</ol>
<p>Selecting <em>Node.js</em> has changed the <strong>Port</strong> value to <code>80</code>. Hasura listens on port <code>8080</code> instead, thus:</p>
<ol start="10">
<li>Change <strong>Port</strong> to <code>8080</code>.</li>
<li>Click on the <strong>Create Website</strong> button.</li>
</ol>
<p>View the newly created KintoBlock for the Hasura API, and note that it points to the <code>master</code> branch of the repository by default.</p>
<h4><a class="anchor" aria-hidden="true" id="configure-environment-variables"></a><a href="#configure-environment-variables" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Configure environment variables</h4>
<p>Before starting the build, some environment variables associated with the build are required to be specified:</p>
<ol>
<li>Click on the <strong>Settings</strong> button displayed in the sidebar to modify the Helm arguments.</li>
<li>Scroll down to the <em><strong>Environment Variables (defaults)</strong></em> section, and enter the arguments mentioned below:</li>
<li><strong>Variable</strong> <code>HASURA_GRAPHQL_DATABASE_URL</code> with the connection string to the database. If you followed the tutorial to set up the database, use as the connection string <code>postgres://postgres:SuperS3cr3t@cs-postgres:5432/postgres</code> <strong>Value</strong>. This entry can be marked as required with the <strong>Required</strong> checkbox.</li>
<li><strong>Variable</strong> <code>HASURA_GRAPHQL_ENABLE_CONSOLE</code> with a <strong>Value</strong> of <code>true</code> to enable the Hasura console.</li>
<li><strong>Variable</strong> <code>HASURA_GRAPHQL_ADMIN_SECRET</code> with a password value to protect the Console from being accessed publicly, e.g. <code>dev_secret</code>. This entry can be marked as required with the This is <strong>Required</strong> checkbox.</li>
</ol>
<blockquote>
<p><em>Tip</em>: The below-mentioned multi-line configuration can also be copied/pasted in the <em>Enter Variable</em> field, and it will set them at once:</p>
<pre><code class="hljs css language-ini"><span class="token constant">HASURA_GRAPHQL_DATABASE_URL</span><span class="token attr-value"><span class="token punctuation">=</span>postgres://postgres:SuperS3cr3t@cs-postgres:5432/postgres</span>
<span class="token constant">HASURA_GRAPHQL_ENABLE_CONSOLE</span><span class="token attr-value"><span class="token punctuation">=</span>true</span>
<span class="token constant">HASURA_GRAPHQL_ADMIN_SECRET</span><span class="token attr-value"><span class="token punctuation">=</span>dev_secret</span>
</code></pre>
</blockquote>
<ol start="3">
<li>Click the <strong>Save Changes</strong> to store the Environment Variables.</li>
</ol>
<h4><a class="anchor" aria-hidden="true" id="build-the-kintoblock"></a><a href="#build-the-kintoblock" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Build the KintoBlock</h4>
<ol start="4">
<li>Select the <code>master</code> branch under the <strong>Branches</strong> tab in the sidebar.</li>
<li>Click on <em><strong>Build Latest Commit</strong></em> button to start the build with the provided Environment Variables.</li>
</ol>
<p>Once the build is completed, it is ready to be deployed.</p>
<h3><a class="anchor" aria-hidden="true" id="deploy-hasura"></a><a href="#deploy-hasura" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Deploy Hasura</h3>
<p>Depending on whether you already created a project in the PostgreSQL steps, either
(A) add to that existing one, or
(B) create a new project.</p>
<h4><a class="anchor" aria-hidden="true" id="a-add-to-existing-project"></a><a href="#a-add-to-existing-project" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>A) Add to existing project</h4>
<p>The KintoBlock for an existing deployment can be added instantly from the KintoBlock page.</p>
<ol>
<li>Click on the <strong>Add to Project</strong> button and the menu with the projects appears.</li>
<li>Select under the desired project in the environment. (e.g. <code>dev</code> under <code>hasura</code>)</li>
</ol>
<p>The existing <em>Hasura</em> project page appears, and in the <em><strong>KintoBlocks</strong></em> section, it can be seen that the <em>Hasura</em> KintoBlock has been added.</p>
<ol start="3">
<li>Next, press <strong>Deploy</strong> to proceed.</li>
</ol>
<p>The <em><strong>Compare Versions</strong></em> slide panel is displayed with the added <em>Hasura</em> KintoBlock.</p>
<ol start="4">
<li>Click on the <strong>Confirm Deployment</strong> to start the deployment.</li>
</ol>
<p>In the <em><strong>Status &amp; History</strong></em> section, we can see that the deployment is in progress.</p>
<ol start="5">
<li>Wait until the deployment is successful.</li>
</ol>
<h4><a class="anchor" aria-hidden="true" id="b-create-new-project"></a><a href="#b-create-new-project" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>B) Create new project</h4>
<p>The KintoBlock for an existing deployment can be added instantly from the KintoBlock page.</p>
<ol>
<li>Click on the <strong>Add to Project</strong> and the menu with the projects appears.</li>
<li>Click the <strong>New Project</strong> button.</li>
<li>Enter a name in the <strong>Enter project name</strong> field, e.g. <code>hasura</code> and click on the <strong>Create</strong> button.</li>
</ol>
<p>This will bring up the <em><strong>Create New Project</strong></em> page with the <em>Project Name</em> (<code>hasura</code>) and <em>Environment Name</em> (<code>dev</code>) already filled out.</p>
<p>In the <em><strong>KintoBlocks</strong></em> section, it can be seen that the <em>Postgres</em> KintoBlock has been added.</p>
<ol start="4">
<li>Click on the <em><strong>Create New Project</strong></em> to proceed.</li>
</ol>
<p>The deployment in progress can be seen in the <em><strong>Status &amp; History</strong></em> section of the <em>Hasura</em> project page.</p>
<ol start="5">
<li>Wait until the deployment is successful.</li>
</ol>
<h3><a class="anchor" aria-hidden="true" id="accessing-the-hasura-console"></a><a href="#accessing-the-hasura-console" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Accessing the Hasura Console</h3>
<p>On the <em>Hasura</em> project page, scroll down to the <em><strong>KintoBlocks</strong></em> section.</p>
<ol>
<li>Click on the <strong>Open</strong> button on the <em>Hasura</em> KintoBlock to open its endpoint in a new browser tab.</li>
<li>Once the Hasura login screen is displayed, enter the <em>admin secret</em> from the configuration, e.g. dev_secret.</li>
</ol>
<p><img src="/docs/assets/examples/hasura/hasura-login.png" alt="Hasura login screen asking for the admin secret"></p>
<p>Congratulations, you have Hasura up and running on KintoHub!</p>
<p>Next up, let's create another environment for production use.</p>
<h2><a class="anchor" aria-hidden="true" id="multiple-environments"></a><a href="#multiple-environments" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Multiple environments</h2>
<p>In the previous steps, the deployments were done in the <code>dev</code> environment. This is great for testing development activities. For production workloads, it more likely that a separate production environment called <code>prod</code> will be used so that the two don't interfere with each other.</p>
<h3><a class="anchor" aria-hidden="true" id="create-a-production-environment"></a><a href="#create-a-production-environment" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Create a production environment</h3>
<p>In the sidebar of the <em>Hasura</em> project page:</p>
<ol>
<li>Click on the <strong>Add New Environment</strong> button.</li>
</ol>
<p>This brings up a <em><strong>Add New Environment</strong></em> dialog.</p>
<ol start="2">
<li>Enter in the <strong>Environment Name</strong> field the value <code>prod</code>.</li>
<li>Click on the <strong>Add New Environment</strong> button to confirm.</li>
</ol>
<p><img src="/docs/assets/examples/hasura/add-new-environment.png" alt="Add New Environment dialog"></p>
<p>This creates a new <em>PROD</em> environment in the sidebar, below the <em>DEV</em> environment.</p>
<ol start="4">
<li>Use the <em><strong>drag &amp; drop handle</strong></em> next to the environment name to drag the <em>PROD</em> environment above the <em>DEV</em> environment.</li>
</ol>
<p><img src="/docs/assets/examples/hasura/two-environments-sidebar.png" alt="DEV and PROD environments in the sidebar"></p>
<p>Since the environments are in the right order, the KintoBlocks can be promoted from one environment to the other.</p>
<ol start="5">
<li>Click on the <strong>Promote</strong> button.</li>
</ol>
<p>This brings up the <em><strong>Promote</strong></em> dialog, with a confirmation message to indicate that the <em>dev</em> environment is ready to be promoted as the <em>prod</em> environment.</p>
<ol start="6">
<li>Click on the <strong>Deploy</strong> button.</li>
<li><strong>Compare Version</strong> slide panel displays the changes made during the promoting.</li>
<li>Click on the <strong>Confirm Deployment</strong> to start the new deployment into the <em>prod</em> environment.</li>
</ol>
<p>Note that the first deployment for the <strong>PROD</strong> environment is in progress.</p>
<ol start="9">
<li>Wait for the deployment to succeed.</li>
<li>Click on the <strong>Open</strong> button on the <strong>Hasura</strong> KintoBlock to see that the Hasura Console can be accessed.</li>
</ol>
<p><img src="/docs/assets/examples/hasura/prod-environment-deployment.png" alt="PROD environment deployment in progress"></p>
<p>This deployment to <em>prod</em> has used exactly the same environment variables as it has been defined for the <em>dev</em> environment. However, it is common to change these per environments. Let's do that next.</p>
<h3><a class="anchor" aria-hidden="true" id="override-environment-variables"></a><a href="#override-environment-variables" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Override environment variables</h3>
<ol>
<li>Scroll down to the <strong>KintoBlocks</strong> section of the <em>Hasura</em> project in the project manage page of the <em>prod</em> environment.</li>
<li>Click on the <strong>gear icon</strong> in the <em>Hasura</em> KintoBlock.</li>
</ol>
<p>This brings up the <em>Prod Configurations</em> for the KintoBlock, and in the slide panel, an <em><strong>Environment Variables</strong></em> section can be seen.</p>
<ol start="3">
<li>Modify the existing value of the <code>HASURA_GRAPHQL_ADMIN_SECRET</code> variable to another password. (e.g. <code>prod_secret</code>)</li>
<li>Click on the <strong>Done Configuring</strong> in the top right corner to confirm the change.</li>
<li>Click on the <strong>Deploy</strong> button.</li>
</ol>
<p><img src="/docs/assets/examples/hasura/hasura-config-slide-panel.png" alt="Hasura KintoBlock configuration slide panel"></p>
<p>The <em><strong>Compare Versions</strong></em> slide panel will show details of the changes that will be applied with this deployment. Here it can be seen that the environment variables of the <em>Hasura</em> KintoBlock will be modified.</p>
<ol>
<li>Click on the <strong>Confirm Project</strong> to start the deployment.</li>
<li>Wait for the deployment to complete.</li>
<li>Click on the <strong>Open</strong> button on the <em>Hasura</em> KintoBlock and log in with the new password to confirm the changes were applied.</li>
</ol>
<p><img src="/docs/assets/examples/hasura/confirm-prod-deploy.png" alt="Compare Versions slide panel for the environment variables change"></p>
<p>Congratulations, you have completed this tutorial where you've deployed two separate instances of Hasura in their own respective environments.</p>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="/docs/examples/jobs/puppeteer"><span class="arrow-prev">← </span><span>Puppeteer</span></a><a class="docs-next button" href="/docs/examples/todo-list/tutorial"><span>Todo List</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#prepare-a-postgresql-database">Prepare a PostgreSQL database</a><ul class="toc-headings"><li><a href="#use-the-existing-postgresql-kintoblock">Use the existing PostgreSQL KintoBlock</a></li><li><a href="#deploy-postgresql">Deploy PostgreSQL</a></li></ul></li><li><a href="#setup-hasura">Setup Hasura</a><ul class="toc-headings"><li><a href="#fork-hasura-dockerfile">Fork Hasura Dockerfile</a></li><li><a href="#create-a-hasura-kintoblock">Create a Hasura KintoBlock</a></li><li><a href="#deploy-hasura">Deploy Hasura</a></li><li><a href="#accessing-the-hasura-console">Accessing the Hasura Console</a></li></ul></li><li><a href="#multiple-environments">Multiple environments</a><ul class="toc-headings"><li><a href="#create-a-production-environment">Create a production environment</a></li><li><a href="#override-environment-variables">Override environment variables</a></li></ul></li></ul></nav></div><div class="footer-background"><div class="line"></div><div class="footerWrapper wrapper"><footer><div class="content"><div class="footer"><div class="left"><ul class="unstyled-list"></ul><h6 class="byline">Copyright © 2019 KintoHub. All rights reserved</h6></div><div class="right"><ul class="social-icons unstyled-list"><li class="social-icon"><a href="https://twitter.com/kintohub" target="_blank" rel="noopener noreferrer"><img src="/img/footer-socials-twitter.svg" alt=""/></a></li><li class="social-icon"><a href="https://github.com/kintohub" target="_blank" rel="noopener noreferrer"><img src="/img/footer-socials-github.svg" alt=""/></a></li><li class="social-icon"><a href="https://www.linkedin.com/company/13376177/" target="_blank" rel="noopener noreferrer"><img src="/img/footer-socials-linkedin.svg" alt=""/></a></li></ul><a href="/"><div class="footer-logo"><img src="/img/logo-grey-single-color.svg" alt=""/></div></a></div></div></div></footer></div></div></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
                document.addEventListener('keyup', function(e) {
                  if (e.target !== document.body) {
                    return;
                  }
                  // keyCode for '/' (slash)
                  if (e.keyCode === 191) {
                    const search = document.getElementById('search_input_react');
                    search && search.focus();
                  }
                });
              </script><script>
              var search = docsearch({
                
                apiKey: '92a5a28a80be03d1f473c1b4a6af6b33',
                indexName: 'kintohub',
                inputSelector: '#search_input_react'
              });
            </script></body></html>